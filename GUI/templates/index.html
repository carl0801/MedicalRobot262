<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Jaco 2 Interface</title>
    <script src="https://cdn.jsdelivr.net/npm/flv.js@^1.5.0/dist/flv.min.js"></script>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->

    <!-- hvis man skal k√∏re den p√• ens pc i stedet for server skal denne nede under ikke v√¶re kommateret ud tror jeg nok -->
    <!--<link href="static/css/styles.css" rel="stylesheet" />-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet'>
</head>

<body>
    <!-- Responsive navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container px-lg-5">
            <a class="navbar-brand" href="#!" style="font-family: 'Orbitron';">Jaco 2</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
            </div>
        </div>
    </nav>
    <!-- Header-->
    <header class="py-5">
        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3 text-center">
                <div class="m-4 m-lg-5">
                    <h1 class="display-5 fw-bold" style="font-family: 'Orbitron';">Operation</h1>
                    <p class="fs-4">Switch between operations</p>
                    <button class="button-rgb" role="button" onclick="sendline()">Line</button>
                    <button class="button-rgb" role="button" onclick="sendlemon()">Citroen üçã</button>
                    <br>
                    <p class="omrs-input-group">
                        <label class="omrs-input-underlined">
                            <input type="number" id="cx1">
                            <span class="omrs-input-label"></span>
                            <span class="omrs-input-helper">X 1</span>
                        </label>
                    </p>
                    <p class="omrs-input-group">
                        <label class="omrs-input-underlined">
                            <input type="number" id="cy1">
                            <span class="omrs-input-label"></span>
                            <span class="omrs-input-helper">Y 1</span>
                        </label>
                    </p>
                    <p class="omrs-input-group">
                        <label class="omrs-input-underlined">
                            <input type="number" id="cx2">
                            <span class="omrs-input-label"></span>
                            <span class="omrs-input-helper">X 2</span>
                        </label>
                    </p>
                    <p class="omrs-input-group">
                        <label class="omrs-input-underlined">
                            <input type="number" id="cy2">
                            <span class="omrs-input-label"></span>
                            <span class="omrs-input-helper">Y 2</span>
                        </label>
                    </p>
                    <button class="button-rgb" role="button" onclick="sendcoords()">Send Coords </button>
                    <p class="container1">
                        <label for="checkbox-1">
                          <input type="checkbox" id="flip" name="flip" value="unchecked"/>
                          üçã Flip
                        </label>
                    </p>

                    <!--<div class = "show"> <input type="text" name="popup" id="popup" > <input type="text" name="popup" id="popup"> <input type="text" name="popup" id="popup"></div>-->


                </div>
            </div>
        </div>
    </header>
    <section class="py-5">
        <div class="container px-lg-5">
            <div class="p-4 p-lg-5 bg-light rounded-3 text-center">
                <div class="m-4 m-lg-5">
                        <h1 class="display-5 fw-bold" style="font-family: 'Orbitron';">Confirm Path</h1>
                        <p class="fs-4">Watch simulation before action</p>
                        <button class="button-rgb" role="button" onclick="acceptAction()">Confirm</button>
                        <button class="button-rgb" role="button" onclick="declineAction()">Decline</button>
                        <p class="omrs-input-group">
                            <label class="omrs-input-underlined">
                                <div id="info"></div>
                                <span class="omrs-input-label"></span>
                                <span class="omrs-input-helper">Status</span>
                            </label>
                        </p>
                                
                        
                    
                </div>        
            </div>
        </div>
    </section>


    <section class="pt-4">
        <div class="container px-lg-5">
            <div class="row gx-lg-5">
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Current XYZ-RPY</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_x"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">X</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_y"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Y</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_z"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Z</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_roll"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Roll</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_pitch"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Pitch</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_yaw"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Yaw</span>
                                </label>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Goal Pos X-Y-Z-R-P-Y</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="x">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">X</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="y">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Y</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="z">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Z</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="roll">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">R</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="pitch">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">P</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="yaw">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Y</span>
                                </label>
                            </p>
                            <button class="button-rgb" role="button" onclick="sendGoal()">Send Goal </button>

                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Time</h2>
                            <p class="mb-0">n√¶bdyr</p>
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Temperature</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_temp1"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Temp 1</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_temp2"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Temp 2</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_temp3"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Temp 3</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_temp4"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Temp 4</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_temp5"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Temp 5</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_temp6"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Temp 6</span>
                                </label>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Current Joint Angles</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_theta1"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 1</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_theta2"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 2</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_theta3"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 3</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_theta4"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 4</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_theta5"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 5</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_theta6"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 6</span>
                                </label>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Goal Pos Angles</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="Theta1">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 1</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="Theta2">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 2</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="Theta3">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 3</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="Theta4">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 4</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="Theta5">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 5</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <input type="number" id="Theta6">
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Theta 6</span>
                                </label>
                            </p>
                            <button class="button-rgb" role="button" onclick="sendGoal2()">Send Goal</button>

                        </div>
                    </div>
                </div>


                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Change Tool</h2>
                            <p class="mb-0">Switch betweem tools</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Power Consumption (W)</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_power"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Total power</span>
                                </label>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Force Nm</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_force1"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Force Joint 1</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_force2"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Force Joint 2</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_force3"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Force Joint 3</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_force4"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Force Joint 4</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_force5"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Force Joint 5</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_force6"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Force Joint 6</span>
                                </label>
                            </p>

                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-4 mb-5">
                    <div class="card bg-light border-0 h-100">
                        <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                            <h2 class="fs-4 fw-bold" style="font-family: 'Orbitron';">Finger Position</h2>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_finger1"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Finger 1</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_finger2"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Finger 2</span>
                                </label>
                            </p>
                            <p class="omrs-input-group">
                                <label class="omrs-input-underlined">
                                    <div id="C_finger3"></div>
                                    <span class="omrs-input-label"></span>
                                    <span class="omrs-input-helper">Finger 3</span>
                                </label>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>





    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="m-0 text-center text-white">Copyright &copy; DAB NATION</p>
        </div>
    </footer>
    <!-- Core theme JS-->
    <script>


        function updatetheta(divId, url) {
            // Make a GET request to the server to get the latest value of theta
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url, true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    // Update the displayed value of theta
                    var thetaDiv = document.getElementById(divId);
                    thetaDiv.innerHTML = xhr.responseText;
                }
            };
            xhr.send();
        }

        // Update the displayed values of theta every 2 seconds
        setInterval(function () {
            updatetheta('C_theta1', '/C_theta1');
            updatetheta('C_theta2', '/C_theta2');
            updatetheta('C_theta3', '/C_theta3');
            updatetheta('C_theta4', '/C_theta4');
            updatetheta('C_theta5', '/C_theta5');
            updatetheta('C_theta6', '/C_theta6');
            updatetheta('C_x', '/C_x');
            updatetheta('C_y', '/C_y');
            updatetheta('C_z', '/C_z');
            updatetheta('C_roll', '/C_roll');
            updatetheta('C_pitch', '/C_pitch');
            updatetheta('C_yaw', '/C_yaw');
            updatetheta('C_force1', '/C_force1');
            updatetheta('C_force2', '/C_force2');
            updatetheta('C_force3', '/C_force3');
            updatetheta('C_force4', '/C_force4');
            updatetheta('C_force5', '/C_force5');
            updatetheta('C_force6', '/C_force6');
            updatetheta('C_power', '/C_power');
            updatetheta('C_finger1', '/C_finger1');
            updatetheta('C_finger2', '/C_finger2');
            updatetheta('C_finger3', '/C_finger3');
            updatetheta('C_temp1', '/C_temp1');
            updatetheta('C_temp2', '/C_temp2');
            updatetheta('C_temp3', '/C_temp3');
            updatetheta('C_temp4', '/C_temp4');
            updatetheta('C_temp5', '/C_temp5');
            updatetheta('C_temp6', '/C_temp6');
            updatetheta('info','/info')
        }, 1000);

        function sendGoal() {
            var x = document.getElementById("x").value;
            var y = document.getElementById("y").value;
            var z = document.getElementById("z").value;
            var roll = document.getElementById("roll").value;
            var pitch = document.getElementById("pitch").value;
            var yaw = document.getElementById("yaw").value;

            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/goal', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ x: x, y: y, z: z, roll: roll, pitch: pitch, yaw: yaw }));
        }
        function sendGoal() {
            var x = document.getElementById("x").value;
            var y = document.getElementById("y").value;
            var z = document.getElementById("z").value;
            var roll = document.getElementById("roll").value;
            var pitch = document.getElementById("pitch").value;
            var yaw = document.getElementById("yaw").value;

            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/goal', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ x: x, y: y, z: z, roll: roll, pitch: pitch, yaw: yaw }));
        }
        function sendGoal2() {
            var Theta1 = document.getElementById("Theta1").value;
            var Theta2 = document.getElementById("Theta2").value;
            var Theta3 = document.getElementById("Theta3").value;
            var Theta4 = document.getElementById("Theta4").value;
            var Theta5 = document.getElementById("Theta5").value;
            var Theta6 = document.getElementById("Theta6").value;

            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/goal2', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ Theta1: Theta1, Theta2: Theta2, Theta3: Theta3, Theta4: Theta4, Theta5: Theta5, Theta6: Theta6 }));
        }
        function sendcoords() {
            var cx1 = document.getElementById("cx1").value;
            var cy1 = document.getElementById("cy1").value;
            var cx2 = document.getElementById("cx2").value;
            var cy2 = document.getElementById("cy2").value;
            var flipCheckbox = document.getElementById("flip");
            var flipValue;

            if (flipCheckbox.checked) {
            flipValue = 1;
            } else {
            flipValue = 0;
            }

            
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/coords', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ cx1: cx1, cy1: cy1, cx2: cx2, cy2: cy2,flipValue: flipValue}));
        }
        function sendlemon() {
            var msg = "citron";
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/citron', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ msg: msg }));
        }

        function sendline() {
            var msg = "line";
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/line', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ msg: msg }));
        }
        function acceptAction() {
            var msg = 1;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/accept', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ msg: msg }));
        }
        function declineAction() {
            var msg = 0;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/decline', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ msg: msg }));
        }


    </script>
    <script src="js/scripts.js"></script>
</body>

</html>